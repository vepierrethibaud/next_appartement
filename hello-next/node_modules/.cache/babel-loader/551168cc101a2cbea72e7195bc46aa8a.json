{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport AppartementList from './AppartementList';\nimport Searchbar from './SearchBar';\nimport { config } from './config';\nimport \"../css/style.css\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      showAll: false,\n      searchValue: '',\n      isLoading: false,\n      appartements: [],\n      favorites: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleShow\", function () {\n      _this.setState({\n        showAll: !_this.state.showAll\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleInputText\", function (e) {\n      _this.setState({\n        searchValue: e.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleFavorite\", function (e, id) {\n      var favs = _this.state.favorites;\n\n      if (favs.includes(id)) {\n        var index = favs.indexOf(id);\n        favs.splice(index, 1);\n\n        _this.setState({\n          favorites: favs\n        });\n      } else {\n        favs.push(id);\n\n        _this.setState({\n          favorites: favs\n        });\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var apiUrl, req, appartements;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.setState({\n                  isLoading: true\n                });\n                apiUrl = config.apiUrl;\n                _context.next = 4;\n                return fetch(apiUrl);\n\n              case 4:\n                req = _context.sent;\n                _context.next = 7;\n                return req.json();\n\n              case 7:\n                appartements = _context.sent;\n                this.setState({\n                  isLoading: false,\n                  appartements: appartements\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          showAll = _this$state.showAll,\n          searchValue = _this$state.searchValue,\n          isLoading = _this$state.isLoading,\n          appartements = _this$state.appartements,\n          favorites = _this$state.favorites;\n      var filteredAppartements = appartements.filter(function (el) {\n        return el.title.rendered.toLowerCase().includes(searchValue);\n      });\n      var availableAppartements = showAll ? filteredAppartements : filteredAppartements.filter(function (el) {\n        if (el.acf.available) {\n          return el;\n        } else {\n          return false;\n        }\n      });\n      return React.createElement(\"div\", null, React.createElement(\"h1\", null, \"Appartment List\"), React.createElement(\"div\", {\n        className: \"flex\"\n      }, React.createElement(\"button\", {\n        className: \"showAll\",\n        onClick: this.toggleShow\n      }, showAll ? 'Show only available' : 'ShowAll')), React.createElement(Searchbar, {\n        searchValue: searchValue,\n        handleInputText: this.handleInputText,\n        found: availableAppartements.length,\n        total: appartements.length\n      }), isLoading ? React.createElement(\"p\", null, \"Loading ...\") : React.createElement(AppartementList, {\n        appartements: availableAppartements,\n        favorites: favorites,\n        toggleFav: this.toggleFavorite\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Applications/MAMP/htdocs/ican/spe_dev/React/dm/dm_next_appart/next_appartement/hello-next/components/Content.js"],"names":["React","Component","AppartementList","Searchbar","config","App","showAll","searchValue","isLoading","appartements","favorites","setState","state","e","target","value","id","favs","includes","index","indexOf","splice","push","apiUrl","fetch","req","json","filteredAppartements","filter","el","title","rendered","toLowerCase","availableAppartements","acf","available","toggleShow","handleInputText","length","toggleFavorite"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport AppartementList from './AppartementList'\nimport Searchbar from './SearchBar'\nimport { config } from './config'\n\nimport \"../css/style.css\";\n\nclass App extends Component {\n  state = {\n    showAll: false,\n    searchValue: '',\n    isLoading: false,\n    appartements: [],\n    favorites: [],\n  }\n  \n  async componentWillMount() {\n    this.setState({\n      isLoading: true\n    })\n    const apiUrl = config.apiUrl\n    const req = await fetch(apiUrl)\n    const appartements = await req.json()\n    this.setState({\n      isLoading: false,\n      appartements\n    })\n  }\n  toggleShow = () => {\n    this.setState({\n      showAll: !this.state.showAll\n    })\n  }\n  handleInputText = e => {\n    this.setState({\n      searchValue: e.target.value\n    })\n  }\n  toggleFavorite = (e, id) => {\n    const favs = this.state.favorites\n    if (favs.includes(id)) {\n      const index = favs.indexOf(id)\n      favs.splice(index, 1)\n      this.setState({\n        favorites: favs\n      })\n    } else {\n      favs.push(id)\n      this.setState({\n        favorites: favs\n      })\n    }\n  }\n  render () {\n    const { showAll, searchValue, isLoading, appartements, favorites } = this.state\n\n    const filteredAppartements = appartements.filter(el => el.title.rendered.toLowerCase().includes(searchValue))\n    const availableAppartements = showAll ? filteredAppartements : filteredAppartements.filter(el => {\n      if (el.acf.available) {\n        return el\n      } else {\n        return false\n      }\n    })\n    return (\n      <div>\n        <h1>Appartment List</h1>\n\n        <div className=\"flex\">\n            <button className=\"showAll\" onClick={this.toggleShow}>\n            {showAll ? 'Show only available' : 'ShowAll'}\n            </button>\n        </div>\n\n        <Searchbar\n          searchValue={searchValue}\n          handleInputText={this.handleInputText}\n          found={availableAppartements.length}\n          total={appartements.length}\n          />\n        {isLoading ?\n          <p>Loading ...</p>\n          :\n          <AppartementList\n            appartements={availableAppartements}\n            favorites={favorites}\n            toggleFav={this.toggleFavorite}\n          />\n        }\n      </div>\n    )\n  }\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}